<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Stochastic_estimator (knights_tour.Stochastic_estimator)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">knights_tour</a> &#x00BB; Stochastic_estimator</nav><header class="odoc-preamble"><h1>Module <code><span>Stochastic_estimator</span></code></h1><p>Interface for stochastic estimation functions</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-decision"><a href="#type-decision" class="anchor"></a><code><span><span class="keyword">type</span> decision</span><span> = </span><span>{</span></code><ol><li id="type-decision.chosen" class="def record field anchored"><a href="#type-decision.chosen" class="anchor"></a><code><span>chosen : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>A number between <code>0</code> inclusive and <code>choices</code> exclusive, indicating which choice was made</p><span class="comment-delim">*)</span></div></li><li id="type-decision.choices" class="def record field anchored"><a href="#type-decision.choices" class="anchor"></a><code><span>choices : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>A number &gt;= <code>2</code> indicating the number of available choices at a decision point.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>a <code>decision</code> represents a choice that has been made at a decision point</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-rng"><a href="#type-rng" class="anchor"></a><code><span><span class="keyword">type</span> rng</span><span> = <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>A <code>rng</code> is a function that accepts a positive integer as an argument and returns a random integer between 0 (inclusive) and that integer (exclusive)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-random_walk"><a href="#val-random_walk" class="anchor"></a><code><span><span class="keyword">val</span> random_walk : <span><a href="#type-rng">rng</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Searchspace/index.html#type-t">Searchspace.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-decision">decision</a> <span class="xref-unresolved">Stdlib</span>.List.t</span> * <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p><code>random_walk</code> searchspace walks a random path in the search space. Every time a decision point is reached, a random choice is made among the available options. The decisions are recorded and returned along with the final result.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-child_selector"><a href="#type-child_selector" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a child_selector</span></span></code></div><div class="spec-doc"><p>Selector functions for choosing among children at a fork.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-uniform_selector"><a href="#val-uniform_selector" class="anchor"></a><code><span><span class="keyword">val</span> uniform_selector : <span><span class="type-var">'a</span> <a href="#type-child_selector">child_selector</a></span></span></code></div><div class="spec-doc"><p>Uses a uniform random choice among available children.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-undersampled_selector"><a href="#val-undersampled_selector" class="anchor"></a><code><span><span class="keyword">val</span> undersampled_selector : <span><span class="type-var">'a</span> <a href="#type-child_selector">child_selector</a></span></span></code></div><div class="spec-doc"><p>Prefers to select children that have been sampled less often.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-weighted_selector"><a href="#val-weighted_selector" class="anchor"></a><code><span><span class="keyword">val</span> weighted_selector : <span><span class="type-var">'a</span> <a href="#type-child_selector">child_selector</a></span></span></code></div><div class="spec-doc"><p>Prefers to select children that have a higher number of descendants.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-estimates"><a href="#type-estimates" class="anchor"></a><code><span><span class="keyword">type</span> estimates</span><span> = </span><span>{</span></code><ol><li id="type-estimates.nodes" class="def record field anchored"><a href="#type-estimates.nodes" class="anchor"></a><code><span>nodes : float;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The estimated number of nodes in the search space.</p><span class="comment-delim">*)</span></div></li><li id="type-estimates.fails" class="def record field anchored"><a href="#type-estimates.fails" class="anchor"></a><code><span>fails : float;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The estimated number of leaf nodes in the search space that represent failures.</p><span class="comment-delim">*)</span></div></li><li id="type-estimates.solutions" class="def record field anchored"><a href="#type-estimates.solutions" class="anchor"></a><code><span>solutions : float;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The estimated number of leaf nodes in the search space that represent solutions.</p><span class="comment-delim">*)</span></div></li><li id="type-estimates.materialized_nodes" class="def record field anchored"><a href="#type-estimates.materialized_nodes" class="anchor"></a><code><span>materialized_nodes : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The number of nodes that were actually materialized during the estimation process.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-estimate"><a href="#val-estimate" class="anchor"></a><code><span><span class="keyword">val</span> estimate : 
  <span><span class="optlabel">?selector</span>:<span><span class="type-var">'a</span> <a href="#type-child_selector">child_selector</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Searchspace/index.html#type-t">Searchspace.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-estimates">estimates</a></span></code></div><div class="spec-doc"><p><code>estimate n searchspace</code> performs <code>n</code> random walks in the given search space and uses the results to produce an estimate of the total number of nodes, fails and solutions in the search space. The estimate is returned as a record of type <code>estimates</code>. The number of materialized nodes is also reported.</p><p>The optional <code>selector</code> argument can be used to influence how choices are made at decision points. By default, the <code>undersampled_selector</code> is used. Other strategies are available in this module.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-stats"><a href="#type-stats" class="anchor"></a><code><span><span class="keyword">type</span> stats</span><span> = </span><span>{</span></code><ol><li id="type-stats.nodes" class="def record field anchored"><a href="#type-stats.nodes" class="anchor"></a><code><span>nodes : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The exact number of nodes in the search space.</p><span class="comment-delim">*)</span></div></li><li id="type-stats.forks" class="def record field anchored"><a href="#type-stats.forks" class="anchor"></a><code><span>forks : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The exact number of fork nodes in the search space.</p><span class="comment-delim">*)</span></div></li><li id="type-stats.fails" class="def record field anchored"><a href="#type-stats.fails" class="anchor"></a><code><span>fails : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The exact number of leaf nodes in the search space that represent failures.</p><span class="comment-delim">*)</span></div></li><li id="type-stats.solutions" class="def record field anchored"><a href="#type-stats.solutions" class="anchor"></a><code><span>solutions : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The exact number of leaf nodes in the search space that represent solutions.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-calculate_true_values"><a href="#val-calculate_true_values" class="anchor"></a><code><span><span class="keyword">val</span> calculate_true_values : <span><span><span class="type-var">'a</span> <a href="../Searchspace/index.html#type-t">Searchspace.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-stats">stats</a></span></code></div><div class="spec-doc"><p><code>calculate_true_values searchspace</code> fully explores the given search space and returns the exact counts of nodes, fails and solutions as an <code>estimates</code> record.</p><p>This function is useful for validating the accuracy of estimates produced by the <code>estimate</code> function. It should only be used on small search spaces where a full exploration is feasible.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>An incremental estimator for a search space.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span class="optlabel">?selector</span>:<span><span class="type-var">'a</span> <a href="#type-child_selector">child_selector</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Searchspace/index.html#type-t">Searchspace.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>create ?selector searchspace</code> creates a new incremental estimator for the given search space, optionally using a custom selector.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sample"><a href="#val-sample" class="anchor"></a><code><span><span class="keyword">val</span> sample : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>sample n est</code> performs <code>n</code> additional samples, updating the estimator's statistics.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-estimates"><a href="#val-estimates" class="anchor"></a><code><span><span class="keyword">val</span> estimates : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-estimates">estimates</a></span></code></div><div class="spec-doc"><p><code>estimates est</code> returns the current estimates from the estimator.</p></div></div></div></body></html>
